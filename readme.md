## NLP기반 감정분석과 임베딩 모델을 활용한 카페 분류 프로젝트
Cafe Classification Using NLP-Based Sentiment Analysis and Embedding Models

- 기간: ‘25년 5월 ~ ‘25년 6월(2개월)

- 건국대학교 경영학과 데이터기반 의사결정 (이명구 교수님)

- 기술 스택

| 파트 | 사용 도구 |
| --- | --- |
| 크롤링 | Selenium,  Requests |
| NLP | KoNLPy, Transformers(Huggingface), SBERT |
| 머신러닝 | Scikit-learn, Gensim (LDA), KMeans |
| 시각화 | Matplotlib, Seaborn, Plotly |

- 주요 내용
 - Python을 활용해 카페 리뷰 데이터 수집 및 전처리, 감정 분석 기반 키워드 추출과 문장 임베딩 수행
 - SBERT 기반 임베딩 클러스터링과 키워드 빈도 기반 분류 방식을 비교 분석
 - 사용 목적에 맞는 카페 추천 시스템 설계를 목표로, 텍스트 기반 자동 분류 알고리즘 구현

### 목적

사람들이 카페를 갈 때 공부, 수다 등 목적이 항상 다르다. 카페를 검색하면 다양한 특성의 카페들이 동시에 나오기에, 소비자가 직접 찾아야 하는 문제를 해결하고자, 개별 카페들이 가진 고유한 특징을 자동으로 분류하는 시스템을 만드는 것. 이를 통해 사용자는 목적에 맞는 카페를 더 쉽게 탐색할 수 있고, 데이터 기반의 상권 분석에도 응용할 수 있다.

<br>

### 참고

https://github.com/cabojago/cabojago


<br>

### 내용


<br>

**가설 설정**

1 . 카페의 리뷰 데이터는 그 카페의 특성을 반영할 것이다. 
ex> 만약 디저트 맛집으로 유명한 카페가 있다면, 그 카페의 리뷰글에서 “디저트”라는 단어가 가장 많이 발견될 것이다. 

2 . 각각의 카페는 유사한 리뷰들로 구성되어 있을 것이다. 
ex> 공부하기 좋은 카페가 있다면, 다수가 비슷한 후기를 남겼을 것이다.

3 . 임베딩 기반 클러스터링은 키워드 방식보다 문장의 의미적 유사도를 포착하는 데 유리하며, 리뷰의 뉘앙스와 맥락을 고려한 테마 분류가 가능하다. 따라서, 이 프로젝트에서는 문장 임베딩 기반 클러스터링 방식이 더 효과적일 것이다

<br>
<br>

**데이터 수집**

→ 네이버지도 및 블로그 크롤링, 카카오맵 크롤링, 케글 데이터 사용(가능하면)

| 카페 이름 | 주소 | 리뷰 원문 | 리뷰 키워드 | 평점 |
| --- | --- | --- | --- | --- |
| ***카페A*** | 서울 광진구... | "공부하기 너무 좋아요. 조용하고 콘센트도 많아요!" | 공부, 조용함, 콘센트 | 4.5 |

<br>
<br>

**데이터 전처리(필터링)**

비정형 데이터로서, 이상치 or 결측치 등은 존재 x

다만 필터링 필요 -> 전처리 단계에서 감정 분석을 하려는 이유

- "콘센트가 없어요" → 콘센트 언급 있음 → 키워드 ‘콘센트’ 카운트 증가 → 카공하기 좋은 카페로 분류될 수 있음  하지만 의미는 '콘센트 없음' (부정) → "카공에 부적절"해야 맞음
- 이런 현상을 해결하기 위해
    - 1차적으로 감정빈도 분석을 통해 부정적인 카페가 있다면 제외
    - 2차적으로 부정적인 리뷰는 제외하거나 클러스터링에서 분류에 부정적인 영향을 미치도록 설계

<br>
<br>

**분류 방안 1 - 임베딩 모델 적용**
- Ko-Sentence-BERT와 같은 사전학습 모델을 이용:
- 통합된 리뷰 문단 → 고차원 임베딩 벡터로 변환
- 토크나이징: 문단을 토큰(단어 또는 하위 단어) 단위로 분해함. ["말차", "빙수", "는", "위", "에", "연유", "가", "뿌려져", "있어서", "달콤한", ...]
Transformer Encoding: 각각의 토큰에 대해 벡터(예: 768차원)를 생성
- 이 벡터들은 카페 리뷰의 주제적 의미를 반영
이후 KMeans, Spectral Clustering 등 다양한 알고리즘을 적용해 자동 분류

![클러스터링 플로우](image.png)

<br>
<br>

**임베딩 모델 단점 발견**
<br>
우리가 원하는 카테고리로 분류를 하기 어렵다. 
 → 문장 임베딩 기반 클러스터링은 데이터의 의미적 유사성을 바탕으로 자동으로 묶는 방식이기 때문에 우리가 *명확하게 원하는 카테고리(ex. 데이트카페, 카공카페, 뷰맛집)와 정확히 일치하지 않을 수 있음.

클러스터링 결과를 “왜 이렇게 묶였는지” 사람이 직관적으로 해석하기 어렵다
 → 임베딩 후 클러스터링된 결과는 각 군집의 중심이 고차원 벡터이기 때문에 “왜 이 카페들이 같은 군집으로 묶였는가?”를 사람 눈으로 바로 이해하기 어렵다

<br>
<br>

**분류 방안 2 - 키워드 분석**
<br>
 리뷰에서 형태소 분석기로 명사와 형용사를 추출
 키워드를 정의 (커피 맛집 → 진하다, 향, 드립커피 등 포함)
 리뷰에서 제일 많이 나온 키워드를 토대로 테마 분류 (진하다, 깊다, 고소하다 → 커피맛집으로 분류 )
 각 테마별로 키워드 등장 순위를 정하고 5등까지 출력

 ![클러스터링 플로우](image2.png)

<br>
<br>

 **결론 도출**
 <br>
임베딩 방식은 의미적 유사도를 계산할 수 있어 이론상으로는 고급 방식이지만,
실전에서는 짧고 목적이 뚜렷한 리뷰 분류에는 오히려 키워드 방식이 더 효과적일 수 있음.
특히 이번 프로젝트처럼 주제 분류 기준이 명확하고, 사용자의 기대 방향이 뚜렷한 경우,
키워드 방식이 정확하고 직관적이며 컨트롤하기도 좋음

<br>
<br>

 **비즈니스 관점에서**
1. 소비자는 더 이상 리뷰를 일일이 읽을 필요 없음
2. 의도에 맞는 ‘정확한’ 카페 선택 가능
3. 추천 알고리즘의 기반이 될 수 있음
4. 리뷰는 부정적일지라도 ‘의미 있는 분류 정보‘
5. 소비자 맞춤형 카페 지도 제작 가능